# 🔬 Labdetector: 微纳流体实验室多模态智能科研助手

> **核心目标**：针对微纳尺度固液界面物理力学实验，构建集“实时视觉监控、伴随式语音记录、专业知识回溯”于一体的智能科研闭环，实现实验室隐性知识的显性化与资产化。

---

## 📅 项目当前进展 (Current Milestones)

| 阶段 | 模块 | 状态 | 关键技术进展 |
| :--- | :--- | :--- | :--- |
| **第一阶段** | **分布式通信底座** | ✅ **已完成** | 基于 UDP 广播实现 1-5 台树莓派节点的**自动发现与动态编号**，支持 WebSocket 全双工通信。 |
| **第二阶段** | **多模态感知框架** | ✅ **已完成** | 打通了边缘端视频采集与中心站推理链路，支持本地 Ollama 与云端 Qwen-VL 视觉大模型。 |
| **第三阶段** | **知识库 (RAG)** | 🟡 **进行中** | 已完成向量数据库底座搭建，正批量录入实验室精密仪器 SOP 及流体力学经典文献。 |
| **第四阶段** | **伴随式资产累积** | 🛠️ **待强化** | 规划开发“零知识学习”引擎，通过语音触发自动抓取实验瞬态画面并打标入库。 |

---

## 🏗️ 系统架构 (System Architecture)

系统采用“边缘感知 + 中心推理”的分布式架构，充分利用实验室的RTX 5090算力资源。

- **感知层 (Piside)**：部署于隔振光学平台，通过树莓派 5 实时采集液膜、气泡及接触线图像。
- **通信层 (Communication)**：自主研发的多节点管理模块，确保多路视频流顺序处理，防止算力冲突。
- **决策层 (Pcside)**：基于大模型实现危险行为预警（如激光防护、电泳高压误触）与实验指导。

---

## 🚀 Quick Start

### 1. 环境初始化 (仅需一次)
在 PC 计算中枢根目录下运行，自动注册项目模块路径：
```bash
python setup.py
```
2. 启动节点端 (树莓派)

确保摄像头已连接，运行：

```bash
python piside/pisend_receive.py
```

3. 启动中心端 (PC)

运行主程序：
```bash
python pcside/main.py
```
    节点发现：系统会提示输入预期连接数量，自动扫描并编号。

    按需推理：通过 pcside/core/config.ini 可自定义 AI 识别频率。

📂 目录结构说明
```bash
Labdetector/
├── pcside/                # PC 计算中枢逻辑
│   ├── communication/     # 【新增】多节点自动发现、IP 维护与 WebSocket 分发逻辑
│   ├── core/              # 配置管理 (config.ini)、AI 推理后端、语音引擎、日志模块
│   └── log/               # 【新增】实验运行日志，按日期自动生成，方便复盘
├── piside/                # 树莓派边缘感知逻辑 (视频推送、语音执行)
├── assets/                # (规划) 用于存储实验快照、短视频等数字资产
└── setup.py               # 工业级包管理脚本，解决跨路径调用报错
```
💡 建议
```
跟踪进度：请重点查阅 pcside/log/ 下的运行日志，内含详细的扫描响应时间及 AI 推理延迟。

贡献知识：若需增加新的仪器说明书或实验心得，请放入 RAG 预留接口，系统将自动将其转化为“虚拟导师”的记忆。

硬件升级：下一步重点为树莓派采购麦克风阵列，以实现无接触式的语音伴随记录。
```
